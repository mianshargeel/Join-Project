<div class="overlay" (click)="onClose()"></div>


<div class="dialog" (click)="$event.stopPropagation()">

    <div class="dialog-header">
        <span class="task-category" [ngClass]="categoryClass(task.category)">
            {{ task.category }}
        </span>
        <button class="close-btn" (click)="onClose()">Ã—</button>
    </div>

    <h1 class="task-title">{{ task.title }}</h1>
    <p class="task-description">{{ task.description }}</p>

    <div class="date-prio-section">
        <span class="section-label">Due date:</span>
        <span class="task-value">
            {{ task.duedate.toDate() | date : 'dd/MM/yyyy' }}
        </span>
    </div>

    <div class="date-prio-section">
        <span class="section-label">Priority:</span>
        <span class="priority-display">
            <span class="task-value">{{task.priority}}</span>
            <span class="priority-icon {{task.priority.toLowerCase()}}"></span>
        </span>
    </div>

    <div class="assignees-section">
        <span class="section-label">Assigned to:</span>

        <div class="assignees-list">
            @for (assignee of assignees; track assignee.id) {
            <div class="assignee">
                <span class="avatar" [style.backgroundColor]="assignee.color">{{ assignee.initials }}</span>
                <span class="name">{{ assignee.name }}</span>
            </div>
            }
        </div>
    </div>

    <div class="subtasks-section">
        <span class="section-label">Subtasks:</span>

        <div class="subtasks-list">
            @for (sub of task.subtasks; track sub.id) {
            <label class="subtask">
                <input type="checkbox" [checked]="sub.isdone" disabled>
                <span>{{ sub.title }}</span>
            </label>
            }
        </div>
    </div>

    <div class="dialog-footer">
        <button class="action edit">
            <img src="/assets/img/board/edit.svg" width="18" height="18" alt="">Edit
        </button>

        <span class="vert-divider"></span>

        <button class="action delete">
            <img src="/assets/img/board/delete.svg" width="18" height="18" alt="">Delete
        </button>
    </div>
</div>